# ğŸ“¦ Estrutura do Projeto - DocumentaÃ§Ã£o TÃ©cnica\n\n## ğŸ—ï¸ Arquitetura Geral\n\n```\nnotifica-o_tempo_real/\nâ”‚\nâ”œâ”€â”€ ğŸ“„ server.js                 # Backend principal (Express + Socket.io)\nâ”œâ”€â”€ ğŸ“„ package.json              # DependÃªncias e scripts\nâ”œâ”€â”€ ğŸ“„ .env.example              # VariÃ¡veis de ambiente (template)\nâ”œâ”€â”€ ğŸ“„ .gitignore                # Arquivos ignorados pelo Git\nâ”‚\nâ”œâ”€â”€ ğŸ“ public/                   # Arquivos estÃ¡ticos (servidos pelo Express)\nâ”‚   â”œâ”€â”€ ğŸ“„ index.html            # PÃ¡gina do usuÃ¡rio (painel de notificaÃ§Ãµes)\nâ”‚   â”œâ”€â”€ ğŸ“„ admin.html            # Painel do administrador\nâ”‚   â”œâ”€â”€ ğŸ“„ client.js             # LÃ³gica do cliente (WebSocket + UI)\nâ”‚   â”œâ”€â”€ ğŸ“„ admin.js              # LÃ³gica do admin (formulÃ¡rio + log)\nâ”‚   â””â”€â”€ ğŸ“„ style.css             # Estilos compartilhados (responsivo)\nâ”‚\nâ”œâ”€â”€ ğŸ“ node_modules/             # DependÃªncias instaladas (Git-ignored)\nâ”œâ”€â”€ ğŸ“ .git/                     # RepositÃ³rio Git\nâ”‚\nâ”œâ”€â”€ ğŸ“„ README.md                 # DocumentaÃ§Ã£o principal\nâ”œâ”€â”€ ğŸ“„ TESTING.md                # Guia de testes completo\nâ”œâ”€â”€ ğŸ“„ PRODUCTION_GUIDE.md       # Como escalar para produÃ§Ã£o\nâ””â”€â”€ ğŸ“„ ARCHITECTURE.md           # Este arquivo\n```\n\n---\n\n## ğŸ”„ Fluxo de Dados\n\n### 1. ConexÃ£o Inicial\n```\nNavegador â†’ Socket.io Connect â†’ Server\n                â†“\n         Server registra usuÃ¡rio\n                â†“\n    Carrega histÃ³rico de notificaÃ§Ãµes\n                â†“\n        Emite 'history' event\n                â†“\n      Cliente renderiza notificaÃ§Ãµes\n```\n\n### 2. Receber Nova NotificaÃ§Ã£o (Broadcast)\n```\nAdmin Form Submit\n        â†“\nHTTP POST /api/notify\n        â†“\nServer valida dados\n        â†“\nSalva em memÃ³ria (ou DB)\n        â†“\nSocket.io io.emit('new_notification')\n        â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Todos os clientes recebem â”‚\nâ”‚ 'new_notification' event  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â†“\n  Cliente renderiza\n  Toca som\n  Mostra notificaÃ§Ã£o nativa\n  Atualiza badge\n```\n\n### 3. Marcar como Lida\n```\nClique na NotificaÃ§Ã£o\n        â†“\nEvento click listener\n        â†“\nSocket.emit('mark_as_read', notifId)\n        â†“\nServer atualiza status\n        â†“\nSocket.emit('notification_read')\n        â†“\nCliente atualiza UI\nDiminui contador\n```\n\n---\n\n## ğŸ“Š Estrutura de Dados\n\n### NotificaÃ§Ã£o (Em MemÃ³ria)\n```javascript\n{\n  id: 1,                      // ID Ãºnico (auto-incrementado)\n  title: \"TÃ­tulo\",            // String atÃ© 100 caracteres\n  message: \"ConteÃºdo...\",      // String atÃ© 500 caracteres\n  read: false,                // Boolean - status de leitura\n  timestamp: \"14:30:45\"       // String - hora formatada\n}\n```\n\n### UsuÃ¡rio Conectado (Mapeamento)\n```javascript\nusers = {\n  \"user1234\": \"socket-id-xyz\",  // userId â†’ socketId\n  \"user5678\": \"socket-id-abc\"\n}\n```\n\n### NotificaÃ§Ãµes (Array)\n```javascript\nnotifications = [\n  { id: 1, title: \"...\", message: \"...\", read: false, timestamp: \"...\" },\n  { id: 2, title: \"...\", message: \"...\", read: true,  timestamp: \"...\" }\n]\n```\n\n---\n\n## ğŸŒ Endpoints HTTP\n\n### `POST /api/notify`\n**DescriÃ§Ã£o:** Enviar notificaÃ§Ã£o\n\n**Request Body:**\n```json\n{\n  \"title\": \"TÃ­tulo da NotificaÃ§Ã£o\",\n  \"message\": \"Mensagem completa\",\n  \"targetUser\": \"user1234\"  // Opcional, deixar vazio para broadcast\n}\n```\n\n**Response Success:**\n```json\n{\n  \"success\": true,\n  \"notification\": {\n    \"id\": 1,\n    \"title\": \"...\",\n    \"message\": \"...\",\n    \"read\": false,\n    \"timestamp\": \"14:30:45\"\n  }\n}\n```\n\n**Response Error:**\n```json\n{\n  \"success\": false,\n  \"error\": \"Title and message required\"\n}\n```\n\n---\n\n## ğŸ”Œ WebSocket Events (Socket.io)\n\n### Server emits\n\n#### `history` (ao conectar)\n```javascript\nsocket.emit('history', notifications[])\n```\nEnvia todas as notificaÃ§Ãµes existentes quando um cliente se conecta.\n\n#### `new_notification` (ao enviar)\n```javascript\nio.emit('new_notification', notification)\n// ou\nio.to(socketId).emit('new_notification', notification)\n```\nNotifica clientes sobre nova mensagem.\n\n#### `unread_count` (ao conectar/atualizar)\n```javascript\nsocket.emit('unread_count', 5)\n```\nEnvia nÃºmero de nÃ£o-lidas.\n\n#### `notification_read` (confirmaÃ§Ã£o)\n```javascript\nsocket.emit('notification_read', notifId)\n```\n\n### Client emits\n\n#### `register` (ao conectar)\n```javascript\nsocket.emit('register', userId)\n```\nRegistra o usuÃ¡rio no servidor.\n\n#### `mark_as_read` (ao clicar)\n```javascript\nsocket.emit('mark_as_read', notifId)\n```\nMarca notificaÃ§Ã£o como lida.\n\n---\n\n## ğŸ¯ Funcionalidades Principais\n\n### Frontend\n\n**index.html** (Painel do UsuÃ¡rio)\n- [ ] Header com ID do usuÃ¡rio\n- [ ] Indicador de status (conectado/desconectado)\n- [ ] Lista de notificaÃ§Ãµes\n- [ ] Badge com contador de nÃ£o-lidas\n- [ ] BotÃ£o limpar histÃ³rico\n- [ ] Painel de informaÃ§Ãµes lateral\n- [ ] Link para painel admin\n\n**client.js** (LÃ³gica do Cliente)\n- [ ] ConexÃ£o WebSocket\n- [ ] Registro de usuÃ¡rio\n- [ ] Escuta de eventos\n- [ ] RenderizaÃ§Ã£o dinÃ¢mica\n- [ ] ReproduÃ§Ã£o de som\n- [ ] NotificaÃ§Ãµes nativas\n- [ ] AtualizaÃ§Ã£o de badge\n- [ ] SincronizaÃ§Ã£o de estado\n\n**admin.html** (Painel Admin)\n- [ ] FormulÃ¡rio de envio\n- [ ] ValidaÃ§Ã£o de entrada\n- [ ] Seletor de usuÃ¡rio alvo\n- [ ] Log de enviamentos\n- [ ] EstatÃ­sticas\n- [ ] Feedback visual\n\n**admin.js** (LÃ³gica Admin)\n- [ ] Envio HTTP POST\n- [ ] Contador de caracteres\n- [ ] Mensagem de sucesso\n- [ ] HistÃ³rico de envios\n- [ ] AtualizaÃ§Ã£o de stats\n\n**style.css** (Estilos)\n- [ ] Design responsivo (mobile-first)\n- [ ] Paleta de cores (azul primÃ¡rio)\n- [ ] AnimaÃ§Ãµes suaves\n- [ ] Grid layout adaptÃ¡vel\n- [ ] Media queries\n- [ ] Estados (hover, active, disabled)\n\n### Backend\n\n**server.js** (Express + Socket.io)\n- [x] Inicializar app Express\n- [x] Servir arquivos estÃ¡ticos\n- [x] Criar servidor HTTP\n- [x] Inicializar Socket.io\n- [x] Gerenciar conexÃµes\n- [x] Processar eventos\n- [x] Guardar notificaÃ§Ãµes em memÃ³ria\n- [x] Mapear usuÃ¡rios online\n- [x] Validar requisiÃ§Ãµes\n- [x] Broadcast de notificaÃ§Ãµes\n\n---\n\n## ğŸ”’ SeguranÃ§a (MVP)\n\nâš ï¸ **O MVP NÃƒO tem:**\n- [ ] AutenticaÃ§Ã£o\n- [ ] ValidaÃ§Ã£o profunda\n- [ ] Rate limiting\n- [ ] HTTPS\n- [ ] Headers de seguranÃ§a\n- [ ] SanitizaÃ§Ã£o de entrada\n\nâœ… **Para produÃ§Ã£o, adicionar:**\n- [ ] JWT/OAuth2\n- [ ] ValidaÃ§Ã£o com Joi/Yup\n- [ ] helmet.js (headers de seguranÃ§a)\n- [ ] express-rate-limit\n- [ ] SanitizaÃ§Ã£o com DOMPurify\n- [ ] HTTPS/WSS\n- [ ] CSRF protection\n- [ ] Input validation\n\n---\n\n## ğŸ“ˆ Escalabilidade\n\n### Atual (MVP em memÃ³ria)\n- âœ… AtÃ© ~1000 notificaÃ§Ãµes simultÃ¢neas\n- âœ… AtÃ© ~100 usuÃ¡rios online\n- âŒ Sem persistÃªncia\n- âŒ Sem distribuiÃ§Ã£o\n\n### Com Banco de Dados\n- âœ… Ilimitado de notificaÃ§Ãµes\n- âŒ Ainda dependÃªncia de Ãºnico servidor\n\n### Com Fila (Redis/RabbitMQ)\n- âœ… Processamento assÃ­ncrono\n- âœ… Melhor performance\n- âœ… ResiliÃªncia\n\n### Com MÃºltiplos Servidores\n- âœ… Redis Adapter para Socket.io\n- âœ… DistribuiÃ§Ã£o horizontal\n- âœ… Alta disponibilidade\n\n---\n\n## ğŸ“Š Performance\n\n### MÃ©tricas Esperadas (MVP)\n- **LatÃªncia de notificaÃ§Ã£o:** < 50ms\n- **Tempo de renderizaÃ§Ã£o:** < 100ms\n- **Memory usage:** < 50MB\n- **CPU usage:** < 5%\n\n### OtimizaÃ§Ãµes Futuras\n- [ ] CompressÃ£o de dados\n- [ ] Caching de clientes\n- [ ] Lazy loading de histÃ³rico\n- [ ] PaginaÃ§Ã£o de notificaÃ§Ãµes\n- [ ] Ãndices de banco de dados\n\n---\n\n## ğŸ§ª Cobertura de Testes\n\n**Funcional (Manual):**\n- [x] Conectar/desconectar\n- [x] Envio de notificaÃ§Ã£o\n- [x] Receber notificaÃ§Ã£o\n- [x] Marcar como lida\n- [x] Broadcast\n- [x] Envio direcionado\n- [x] HistÃ³rico\n- [x] Som e animaÃ§Ãµes\n\n**Automatizado (TODO):**\n- [ ] Testes unitÃ¡rios\n- [ ] Testes de integraÃ§Ã£o\n- [ ] Testes E2E\n- [ ] Load testing\n\n---\n\n## ğŸš€ Roadmap\n\n**Fase 1 (Atual):** MVP com as features base âœ…\n\n**Fase 2:** Melhorias de UX\n- Categorias de notificaÃ§Ãµes\n- PreferÃªncias de usuÃ¡rio\n- Temas (light/dark)\n- MÃºltiplos idiomas\n\n**Fase 3:** Escalabilidade\n- Banco de dados\n- AutenticaÃ§Ã£o\n- Fila de mensagens\n- Redis\n\n**Fase 4:** Recursos AvanÃ§ados\n- Analytics\n- Dashboard\n- Push notifications\n- Email notifications\n- SMS notifications\n\n**Fase 5:** Enterprise\n- Multi-tenancy\n- SAML/OAuth2\n- Audit logs\n- SLA monitoring\n\n---\n\n## ğŸ“š Stack\n\n| Camada | Tecnologia | VersÃ£o |\n|--------|-----------|--------|\n| Runtime | Node.js | 14+ |\n| Web Framework | Express | 4.18+ |\n| Real-time | Socket.io | 4.5+ |\n| Frontend | Vanilla JS | ES6+ |\n| Styling | CSS3 | Grid, Flexbox |\n| Package Manager | npm | 6+ |\n\n---\n\n## ğŸ“ Suporte e ContribuiÃ§Ã£o\n\n- **Issues:** Abra uma issue descrevendo o problema\n- **PRs:** FaÃ§a fork, crie branch e envie PR\n- **Docs:** Melhorias na documentaÃ§Ã£o sÃ£o bem-vindas\n\n---\n\n**Ãšltima atualizaÃ§Ã£o:** 27/02/2026\n"